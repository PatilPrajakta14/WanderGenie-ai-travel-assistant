# ğŸ—ºï¸ WanderGenie - High-Level Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER INTERFACE                                  â”‚
â”‚                          (Next.js + Tailwind)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Chat Pane    â”‚  â”‚   Itinerary  â”‚  â”‚  Interactive â”‚  â”‚   Booking    â”‚   â”‚
â”‚  â”‚ "5 days in   â”‚  â”‚   Timeline   â”‚  â”‚     Map      â”‚  â”‚    Links     â”‚   â”‚
â”‚  â”‚  NYC..."     â”‚  â”‚   Component  â”‚  â”‚ (Mapbox/OSM) â”‚  â”‚  + Calendar  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚            â”‚
â”‚         â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                          trip.json updates                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ WebSocket / REST API
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND ORCHESTRATOR                                 â”‚
â”‚                      (FastAPI + LangGraph)                                  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    LangGraph State Machine                         â”‚    â”‚
â”‚  â”‚                                                                    â”‚    â”‚
â”‚  â”‚   START â†’ Planner â†’ Researcher â†’ Packager â†’ Validator â†’ END       â”‚    â”‚
â”‚  â”‚             â”‚          â”‚            â”‚           â”‚                  â”‚    â”‚
â”‚  â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚    â”‚
â”‚  â”‚                    Shared State: trip.json                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      TOOL REGISTRY                                   â”‚  â”‚
â”‚  â”‚  â€¢ poi_search()        â€¢ build_flight_link()                        â”‚  â”‚
â”‚  â”‚  â€¢ get_open_hours()    â€¢ build_hotel_link()                         â”‚  â”‚
â”‚  â”‚  â€¢ distance_calc()     â€¢ export_calendar()                          â”‚  â”‚
â”‚  â”‚  â€¢ validate_schema()   â€¢ make_geojson()                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
          â”‚                    â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AGENT LAYER      â”‚  â”‚  MEMORY LAYER   â”‚  â”‚  EXTERNAL APIs  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– Agent Architecture (3 Agents)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LANGGRAPH WORKFLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    USER PROMPT: "5 days in NYC from Buffalo, Dec 20-25, with teen"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENT 1: PLANNER                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Role: Intent Parser & Trip Designer                           â”‚     â”‚
â”‚  â”‚  Input: Raw user text                                          â”‚     â”‚
â”‚  â”‚  Output: Structured intent JSON                                â”‚     â”‚
â”‚  â”‚  {                                                              â”‚     â”‚
â”‚  â”‚    "city": "New York City, NY",                                â”‚     â”‚
â”‚  â”‚    "origin": "Buffalo, NY",                                    â”‚     â”‚
â”‚  â”‚    "start_date": "2025-12-20",                                 â”‚     â”‚
â”‚  â”‚    "nights": 5,                                                â”‚     â”‚
â”‚  â”‚    "party": {"adults": 2, "kids": 1},                          â”‚     â”‚
â”‚  â”‚    "prefs": {"pace": "moderate", "interests": ["views","food"]}â”‚     â”‚
â”‚  â”‚  }                                                              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  LLM: Claude (Bedrock) / GPT-4o-mini                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENT 2: RESEARCHER                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Role: POI Discovery & Enrichment                              â”‚     â”‚
â”‚  â”‚  Input: intent JSON                                            â”‚     â”‚
â”‚  â”‚  Process:                                                       â”‚     â”‚
â”‚  â”‚    1. Call OpenTripMap API â†’ get POI candidates                â”‚     â”‚
â”‚  â”‚    2. Query VectorDB â†’ enrich with booking notes, tips         â”‚     â”‚
â”‚  â”‚    3. Query GraphDB â†’ cluster by neighborhood, find similar    â”‚     â”‚
â”‚  â”‚  Output: poi_candidates[]                                      â”‚     â”‚
â”‚  â”‚  [{                                                             â”‚     â”‚
â”‚  â”‚    "name": "Statue of Liberty",                                â”‚     â”‚
â”‚  â”‚    "lat": 40.6892, "lon": -74.0445,                            â”‚     â”‚
â”‚  â”‚    "tags": ["landmark", "view"],                               â”‚     â”‚
â”‚  â”‚    "duration_min": 180,                                        â”‚     â”‚
â”‚  â”‚    "booking_required": true,                                   â”‚     â”‚
â”‚  â”‚    "booking_url": "https://...",                               â”‚     â”‚
â”‚  â”‚    "notes": "Ferry queues; go early"                           â”‚     â”‚
â”‚  â”‚  }]                                                             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  LLM: Claude + APIs                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENT 3: PACKAGER-EXECUTOR                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Role: Itinerary Builder & Output Generator                    â”‚     â”‚
â”‚  â”‚  Input: poi_candidates[] + intent                              â”‚     â”‚
â”‚  â”‚  Process:                                                       â”‚     â”‚
â”‚  â”‚    1. Cluster POIs by day (proximity, hours, preferences)      â”‚     â”‚
â”‚  â”‚    2. Generate time blocks (09:00-18:30, insert lunch/breaks)  â”‚     â”‚
â”‚  â”‚    3. Query GraphDB â†’ minimize cross-town travel               â”‚     â”‚
â”‚  â”‚    4. Calculate distances â†’ add travel estimates               â”‚     â”‚
â”‚  â”‚    5. Build flight/hotel deep links                            â”‚     â”‚
â”‚  â”‚    6. Generate map GeoJSON                                     â”‚     â”‚
â”‚  â”‚    7. Create calendar events (.ics or Google Calendar)         â”‚     â”‚
â”‚  â”‚  Output: Complete trip.json                                    â”‚     â”‚
â”‚  â”‚  {                                                              â”‚     â”‚
â”‚  â”‚    "days": [...],                                              â”‚     â”‚
â”‚  â”‚    "links": {"flights": "...", "hotels": "..."},               â”‚     â”‚
â”‚  â”‚    "map_geojson": {...},                                       â”‚     â”‚
â”‚  â”‚    "calendar_export": {...}                                    â”‚     â”‚
â”‚  â”‚  }                                                              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  LLM: Claude + Deterministic Tools                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VALIDATOR (Tool, not full agent)                                        â”‚
â”‚  â€¢ JSON schema validation                                                â”‚
â”‚  â€¢ Check overlaps, hours, distances                                      â”‚
â”‚  â€¢ Auto-patch minor issues                                               â”‚
â”‚  â€¢ Return warnings for UI                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    trip.json â†’ UI
```

---

## ğŸ§  Memory Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MEMORY SYSTEMS                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VECTOR DATABASE        â”‚   â”‚    GRAPH DATABASE        â”‚   â”‚   STATE STORE     â”‚
â”‚   (Supabase pgvector)    â”‚   â”‚    (Neo4j Aura Free)     â”‚   â”‚   (Supabase)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚   â”‚                          â”‚   â”‚                   â”‚
â”‚ Collection: poi_facts    â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚  trip.json        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚   (:City)       â”‚    â”‚   â”‚  {                â”‚
â”‚ â”‚ â€¢ name               â”‚ â”‚   â”‚  â”‚      â”‚          â”‚    â”‚   â”‚    trip_id,       â”‚
â”‚ â”‚ â€¢ city               â”‚ â”‚   â”‚  â”‚      â–¼          â”‚    â”‚   â”‚    user_id,       â”‚
â”‚ â”‚ â€¢ coords             â”‚ â”‚   â”‚  â”‚ (:Neighborhood) â”‚    â”‚   â”‚    state,         â”‚
â”‚ â”‚ â€¢ booking_required   â”‚ â”‚   â”‚  â”‚      â”‚          â”‚    â”‚   â”‚    version,       â”‚
â”‚ â”‚ â€¢ booking_url        â”‚ â”‚   â”‚  â”‚      â–¼          â”‚    â”‚   â”‚    intent,        â”‚
â”‚ â”‚ â€¢ hours_text         â”‚ â”‚   â”‚  â”‚    (:POI)       â”‚    â”‚   â”‚    poi_candidates,â”‚
â”‚ â”‚ â€¢ tags[]             â”‚ â”‚   â”‚  â”‚      â”‚          â”‚    â”‚   â”‚    days[],        â”‚
â”‚ â”‚ â€¢ popularity         â”‚ â”‚   â”‚  â”‚      â–¼          â”‚    â”‚   â”‚    links          â”‚
â”‚ â”‚ â€¢ body (text)        â”‚ â”‚   â”‚  â”‚(:TicketProvider)â”‚    â”‚   â”‚  }                â”‚
â”‚ â”‚ â€¢ embedding (vector) â”‚ â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚                   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚                          â”‚   â”‚  Checkpointer:    â”‚
â”‚                          â”‚   â”‚  Relationships:          â”‚   â”‚  LangGraph state  â”‚
â”‚ Collection: rules        â”‚   â”‚  â€¢ IN_NEIGHBORHOOD       â”‚   â”‚  per execution    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â€¢ SIMILAR_TO            â”‚   â”‚                   â”‚
â”‚ â”‚ â€¢ rule_text          â”‚ â”‚   â”‚  â€¢ REQUIRES_TICKET       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚ â€¢ city (optional)    â”‚ â”‚   â”‚  â€¢ NEAR                  â”‚
â”‚ â”‚ â€¢ tags[]             â”‚ â”‚   â”‚                          â”‚
â”‚ â”‚ â€¢ embedding          â”‚ â”‚   â”‚  Queries:                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â€¢ Find POIs in same     â”‚
â”‚                          â”‚   â”‚    neighborhood          â”‚
â”‚ Use Cases:               â”‚   â”‚  â€¢ Get SIMILAR_TO        â”‚
â”‚ â€¢ Augment POI data       â”‚   â”‚    alternatives          â”‚
â”‚ â€¢ Find booking tips      â”‚   â”‚  â€¢ Cluster by proximity  â”‚
â”‚ â€¢ Retrieve constraints   â”‚   â”‚  â€¢ Get ticket vendors    â”‚
â”‚ â€¢ Context for packing    â”‚   â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Tool Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TOOL REGISTRY                                  â”‚
â”‚                    (Called by LangGraph Agents)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

POI & ENRICHMENT TOOLS          PLANNING TOOLS                OUTPUT TOOLS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ poi_search()            â”‚     â”‚ distance_calc()     â”‚     â”‚ build_flight_    â”‚
â”‚   â†’ OpenTripMap API     â”‚     â”‚   â†’ Haversine       â”‚     â”‚    link()        â”‚
â”‚                         â”‚     â”‚                     â”‚     â”‚                  â”‚
â”‚ get_open_hours()        â”‚     â”‚ validate_schema()   â”‚     â”‚ build_hotel_     â”‚
â”‚   â†’ Curated data        â”‚     â”‚   â†’ JSON Schema     â”‚     â”‚    link()        â”‚
â”‚                         â”‚     â”‚                     â”‚     â”‚                  â”‚
â”‚ vectordb_retrieve()     â”‚     â”‚ check_overlaps()    â”‚     â”‚ export_calendar()â”‚
â”‚   â†’ Similarity search   â”‚     â”‚   â†’ Time logic      â”‚     â”‚   â†’ .ics or      â”‚
â”‚                         â”‚     â”‚                     â”‚     â”‚      Google Cal  â”‚
â”‚ graphdb_query()         â”‚     â”‚ pack_day()          â”‚     â”‚                  â”‚
â”‚   â†’ Cypher queries      â”‚     â”‚   â†’ Greedy algo     â”‚     â”‚ make_geojson()   â”‚
â”‚                         â”‚     â”‚                     â”‚     â”‚   â†’ Map features â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ External Integrations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        EXTERNAL SERVICES                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LLM PROVIDER   â”‚   â”‚   POI DATA       â”‚   â”‚   BOOKING LINKS  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚   â”‚                  â”‚   â”‚                  â”‚
â”‚ AWS Bedrock      â”‚   â”‚ OpenTripMap API  â”‚   â”‚ Google Flights   â”‚
â”‚  â€¢ Claude 3      â”‚   â”‚  â€¢ Free tier     â”‚   â”‚  (deep link)     â”‚
â”‚  â€¢ Fallback:     â”‚   â”‚  â€¢ POI search    â”‚   â”‚                  â”‚
â”‚    OpenAI        â”‚   â”‚  â€¢ Coordinates   â”‚   â”‚ Booking.com      â”‚
â”‚    GPT-4o-mini   â”‚   â”‚  â€¢ Categories    â”‚   â”‚  (deep link)     â”‚
â”‚                  â”‚   â”‚  â€¢ Hours         â”‚   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚   â”‚ Attraction sites â”‚
                       â”‚ Fallback:        â”‚   â”‚  â€¢ Statue Cruisesâ”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  nyc_pois.json   â”‚   â”‚  â€¢ SUMMIT        â”‚
â”‚   MAP PROVIDER   â”‚   â”‚  (offline cache) â”‚   â”‚  â€¢ etc.          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚                  â”‚   â”‚                  â”‚
â”‚                  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Mapbox GL JS     â”‚
â”‚  OR              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Leaflet + OSM    â”‚   â”‚  CALENDAR        â”‚
â”‚                  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Pins          â”‚   â”‚                  â”‚
â”‚  â€¢ Clustering    â”‚   â”‚ Google Calendar  â”‚
â”‚  â€¢ Route lines   â”‚   â”‚  â€¢ OAuth 2.0     â”‚
â”‚                  â”‚   â”‚  â€¢ Create events â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚
                       â”‚ Fallback:        â”‚
                       â”‚  .ics download   â”‚
                       â”‚                  â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        REQUEST â†’ RESPONSE FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. USER INPUT
   â”‚
   â”œâ”€â†’ "Planning to visit NYC for 5 days from Buffalo with a teen"
   â”‚
   â–¼

2. PLANNER AGENT
   â”‚
   â”œâ”€â†’ Parse intent
   â”œâ”€â†’ Extract: city, dates, party, preferences
   â”œâ”€â†’ Output: intent JSON
   â”‚
   â–¼

3. RESEARCHER AGENT
   â”‚
   â”œâ”€â†’ Call OpenTripMap(city="NYC", interests=["teen-friendly"])
   â”œâ”€â†’ Query VectorDB("NYC attractions teen friendly", k=12)
   â”œâ”€â†’ Query GraphDB(MATCH (p:POI)-[:IN_NEIGHBORHOOD]->(:Neighborhood)...)
   â”œâ”€â†’ Merge & dedupe results
   â”œâ”€â†’ Output: poi_candidates[] (20-30 POIs)
   â”‚
   â–¼

4. PACKAGER-EXECUTOR AGENT
   â”‚
   â”œâ”€â†’ Score POIs (interest_match + popularity - travel_penalty)
   â”œâ”€â†’ Greedy pack by day:
   â”‚   â€¢ Day 1: Lower Manhattan cluster
   â”‚   â€¢ Day 2: Midtown cluster
   â”‚   â€¢ Day 3-5: Upper Manhattan, Brooklyn, etc.
   â”œâ”€â†’ Insert time blocks (09:00, lunch 12:30, 14:00, etc.)
   â”œâ”€â†’ Calculate distances (GraphDB + Haversine)
   â”œâ”€â†’ Build links: Google Flights(BUFâ†’NYC), Booking.com
   â”œâ”€â†’ Generate GeoJSON for map pins
   â”œâ”€â†’ Create calendar events
   â”œâ”€â†’ Output: Complete trip.json
   â”‚
   â–¼

5. VALIDATOR (Tool)
   â”‚
   â”œâ”€â†’ Validate JSON schema
   â”œâ”€â†’ Check overlaps, closing times
   â”œâ”€â†’ Verify distances reasonable
   â”œâ”€â†’ Auto-patch if fixable
   â”œâ”€â†’ Output: {ok: true, warnings: [...]}
   â”‚
   â–¼

6. RESPONSE TO UI
   â”‚
   â””â”€â†’ {
       "days": [Day 1, Day 2, ...],
       "links": {"flights": "...", "hotels": "..."},
       "map_geojson": {...},
       "calendar_export": {...}
     }

7. UI RENDERS
   â”‚
   â”œâ”€â†’ Timeline component shows day blocks
   â”œâ”€â†’ Map shows pins + routes
   â”œâ”€â†’ Booking buttons active
   â””â”€â†’ "Add to Calendar" ready
```

---

## ğŸ”„ Edit Flow (Conversational Updates)

```
USER: "Swap Day 3 afternoon for MoMA"
   â”‚
   â–¼
BACKEND receives: {trip_id, edit_instruction, current_trip.json}
   â”‚
   â–¼
PLANNER AGENT
   â”‚
   â”œâ”€â†’ Parse edit intent
   â”œâ”€â†’ Identify target: Day 3, afternoon block
   â”œâ”€â†’ New requirement: replace with MoMA
   â”‚
   â–¼
RESEARCHER AGENT
   â”‚
   â”œâ”€â†’ Find MoMA details (coords, hours, duration)
   â”œâ”€â†’ Query VectorDB for MoMA tips
   â”‚
   â–¼
PACKAGER-EXECUTOR AGENT
   â”‚
   â”œâ”€â†’ Load existing trip.json
   â”œâ”€â†’ Remove Day 3 afternoon block
   â”œâ”€â†’ Insert MoMA (check hours, adjust times)
   â”œâ”€â†’ Recalculate distances
   â”œâ”€â†’ Update map GeoJSON (move pin)
   â”œâ”€â†’ Update calendar events (patch Day 3)
   â”œâ”€â†’ Output: Updated trip.json (incremental)
   â”‚
   â–¼
VALIDATOR
   â”‚
   â”œâ”€â†’ Verify Day 3 still valid
   â”‚
   â–¼
RESPONSE to UI
   â”‚
   â””â”€â†’ Partial update: {days[2]: {...}} + new map + calendar patch
```

---

## ğŸ—ï¸ Infrastructure & Deployment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DEPLOYMENT ARCHITECTURE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND (Vercel)      â”‚
â”‚                          â”‚
â”‚  â€¢ Next.js app           â”‚
â”‚  â€¢ Static assets (S3)    â”‚
â”‚  â€¢ CDN edge caching      â”‚
â”‚  â€¢ WebSocket for updates â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ HTTPS / WSS
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API GATEWAY (AWS)      â”‚
â”‚                          â”‚
â”‚  â€¢ /chat                 â”‚
â”‚  â€¢ /trip/{id}            â”‚
â”‚  â€¢ /edit                 â”‚
â”‚  â€¢ /status/{id}          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BACKEND (AWS Lambda + EC2 or Container)           â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  FastAPI + LangGraph Runtime             â”‚      â”‚
â”‚  â”‚  â€¢ Agent orchestration                   â”‚      â”‚
â”‚  â”‚  â€¢ Tool registry                         â”‚      â”‚
â”‚  â”‚  â€¢ State management                      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                      â”‚
â”‚  Option 1: Lambda (lightweight tools only)          â”‚
â”‚  Option 2: ECS/Fargate (full graph runtime)         â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚              â”‚             â”‚
    â–¼                  â–¼              â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Supabase â”‚    â”‚  Neo4j Aura â”‚  â”‚ Bedrock â”‚  â”‚OpenTripMap
â”‚         â”‚    â”‚             â”‚  â”‚         â”‚  â”‚  API     â”‚
â”‚pgvector â”‚    â”‚  (Cloud)    â”‚  â”‚ Claude  â”‚  â”‚          â”‚
â”‚+ State  â”‚    â”‚             â”‚  â”‚         â”‚  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SECRETS MANAGEMENT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS Secrets Mgr  â”‚
â”‚  â€¢ OpenAI key    â”‚
â”‚  â€¢ Bedrock creds â”‚
â”‚  â€¢ Supabase URL  â”‚
â”‚  â€¢ Neo4j creds   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
